---
title: "Sserver Processing"
output: html_document
---


```{r cars}
library(dplyr)
suppressMessages({
  library(readxl)
  library(writexl)
  library(plyr)
  library(dplyr)
  library(data.table)
  library(zoo)
  library(shiny)
  library(shinydashboard)
  library(shinydashboardPlus)
  library(shinyWidgets)
  library(htmlwidgets)
  library(lubridate)
  library(tcltk)
  library(tidyverse)
  library(plotly)
  library(knitr)
  library(kableExtra)
  library(leaflet)
  library(grid)
  library(gridExtra)
  library(eeptools)
  library(ggQC)
  #library(zipcode)
  library(utils)
  library(scales)
  library(chron)
  library(bupaR)
  library(shiny)
  library(DT)
  library(DiagrammeR)
  library(shinyalert)
  library(edeaR)
  library(processmapR)
  library(processmonitR)
  library(processanimateR)
  library(tidyr)
  library(lubridate)
  library(RColorBrewer)
  library(DiagrammeR)
  library(ggplot2)
  library(leaflet)
  library(readr)
  library(highcharter)
  library(ggforce) # for 'geom_arc_bar'
  library(packcircles) # for packed circle graph
  library(viridis)
  library(ggiraph)
  library(treemapify)
  library(treemap)
  library(broom)
  library(extrafont)
  library(tis) # for US holidays
  library(vroom)
  library(sjmisc)
  library(tools)
  library(here)
  library(shinyBS)
  library(shinyscreenshot)
  library(fasttime)
  library(shinycssloaders)
  library(feather)
  library(zipcodeR)
  library(formattable)
  library(shinyjs)
  library(janitor)
  library(patchwork)
  library(pryr)
  library(DBI)
  library(odbc)
})
source("access_process.R")
#path <- "/nfs/data/Applications/Ambulatory/Data/"
path <- "/data/Ambulatory/Data/New_Query/"
historical.data.prev <- readRDS(paste0(path, "historical_data.rds"))
historical.data <- bind_rows(historical.data.prev,historical.data)
historical.data <- historical.data %>% distinct()
saveRDS(historical.data, paste0(path,"historical_data.rds"))
rm(historical.data.prev)
rm(historical.data)

population.data_filtered.prev <- readRDS(paste0(path, "population_data.rds"))
population.data_filtered <- bind_rows(population.data_filtered,population.data_filtered.prev)
population.data_filtered <- population.data_filtered %>% distinct()
saveRDS(population.data_filtered, paste0(path,"population_data.rds"))
rm(population.data_filtered)
rm(population.data_filtered.prev)

utilization.data.prev <- readRDS(paste0(path,"utilization_data.rds"))
utilization.data <- bind_rows(utilization.data,utilization.data.prev)
utilization.data <- utilization.data %>% distinct()
saveRDS(utilization.data, paste0(path, "utilization_data.rds"))
rm(utilization.data)
rm(utilization.data.prev)

holid.prev <- read_feather(paste0(path, "holid.feather"))
holid <- bind_rows(holid, holid.prev)
holid <- holid %>% distinct()
write_feather(holid, paste0(path,"holid.feather"))


```

